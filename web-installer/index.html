<!DOCTYPE html>
<html>
  <head>
    <script type="module" src="https://unpkg.com/esp-web-tools@10.1.1/dist/web/install-button.js?module"></script>
    <style>
      .radios li {
        list-style: none;
      }
    </style>
  </head>
  <body>
    <div class="content">
      <h1>furble web installer</h1>
      <p>A bluetooth wireless remote shutter release/button for Fujifilm X/GFX,
      Canon EOS, Nikon COOLPIX and Sony cameras.<p>
      <hr>
      <p>Flash furble firmware to a supported M5Stack device.</p>
      <p>Select your device:</p>
      <ul class="radios">
        <li>
          <label><input type="radio" name="type" value="m5stick-c-plus"/>M5StickC Plus/M5StickC Plus2</label>
        </li>
        <li>
          <label><input type="radio" name="type" value="m5stack-core"/>M5Stack Core</label>
        </li>
        <li>
          <label><input type="radio" name="type" value="m5stack-core2"/>M5Stack Core2</label>
        </li>
        <li>
          <label><input type="radio" name="type" value="m5stick-c"/>M5StickC</label>
        </li>
      </ul>
      <p class="button-row" align="left">
        <esp-web-install-button class="invisible"></esp-web-install-button>
      </p>

      <div class="footer">
        Follow furble development <a href="https://github.com/gkoh/furble">here</a>
        &mdash;
        Installer powered by <a href="https://esphome.github.io/esp-web-tools/">ESP Web Tools</a>.
      </div>
    <script>
      document.querySelectorAll('input[name="type"]').forEach(radio =>
        radio.addEventListener("change", () => {
          const button = document.querySelector('esp-web-install-button');
          button.manifest = `./manifest_${radio.value}.json`;
          button.classList.remove('invisible');
        }
      ));
    </script>
  </body>
</html>
